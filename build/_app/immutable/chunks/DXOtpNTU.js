import{C as S,t as c,h as y,E as N,D as k,F as L,c as R,s as d,G as T,p as b,I as E,U as D,d as F,J as g,K as q,L as x,M as C,S as M}from"./at2JBewP.js";function U(r,f,e=!1){c&&y();var i=r,s=null,a=null,l=D,v=e?N:0,n=!1;const A=(u,t=!0)=>{n=!0,h(t,u)},h=(u,t)=>{if(l===(l=u))return;let _=!1;if(c){const I=i.data===k;!!l===I&&(i=L(),R(i),d(!1),_=!0)}l?(s?T(s):t&&(s=b(()=>t(i))),a&&E(a,()=>{a=null})):(a?T(a):t&&(a=b(()=>t(i))),s&&E(s,()=>{s=null})),_&&d(!0)};S(()=>{n=!1,f(A),n||h(null,null)},v),c&&(i=F)}function o(r,f){return r===f||r?.[M]===f}function Y(r={},f,e,i){return g(()=>{var s,a;return q(()=>{s=a,a=[],x(()=>{r!==e(...a)&&(f(r,...a),s&&o(e(...s),r)&&f(null,...s))})}),()=>{C(()=>{a&&o(e(...a),r)&&f(null,...a)})}}),r}export{Y as b,U as i};
