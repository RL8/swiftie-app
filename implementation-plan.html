<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swiftie App - Implementation Plan</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.4;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 12px;
        }
        h1 {
            color: #F43F5E;
            border-bottom: 2px solid #F43F5E;
            padding-bottom: 8px;
            margin-bottom: 12px;
            font-size: 1.6em;
        }
        h2 {
            color: #F43F5E;
            margin-top: 18px;
            margin-bottom: 8px;
            cursor: pointer;
            font-size: 1.3em;
        }
        h2::before {
            content: "▼ ";
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s;
        }
        h2.collapsed::before {
            content: "► ";
        }
        h3 {
            margin-top: 16px;
            margin-bottom: 8px;
            color: #555;
            font-size: 1.1em;
        }
        h4 {
            cursor: pointer;
            margin-top: 10px;
            margin-bottom: 6px;
            font-size: 1em;
        }
        h4::before {
            content: "▼ ";
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s;
        }
        h4.collapsed::before {
            content: "► ";
        }
        p {
            margin: 6px 0;
        }
        .phase {
            background-color: #f9f9f9;
            border-left: 4px solid #F43F5E;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 0 5px 5px 0;
        }
        .phase-content {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .task {
            margin-bottom: 12px;
            padding-left: 15px;
            border-left: 2px solid #ddd;
        }
        .task h4 {
            margin-bottom: 4px;
            color: #333;
        }
        .task-content {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .file-list {
            margin-top: 8px;
            background-color: #f0f0f0;
            padding: 8px;
            border-radius: 4px;
        }
        .file {
            font-family: monospace;
            margin-bottom: 3px;
        }
        .file-description {
            margin-left: 15px;
            margin-bottom: 6px;
            font-size: 0.85em;
            color: #555;
        }
        .status {
            margin-top: 10px;
            padding: 6px;
            background-color: #e8f4f8;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .status.completed {
            background-color: #e6f7e6;
        }
        .status.in-progress {
            background-color: #fff8e6;
        }
        .status.not-started {
            background-color: #f8f8f8;
        }
        .phase-status {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.7em;
            padding: 3px 6px;
            border-radius: 3px;
            margin-left: 8px;
        }
        .not-started {
            background-color: #eee;
            color: #666;
        }
        .in-progress {
            background-color: #ffedcc;
            color: #956100;
        }
        .completed {
            background-color: #d4edda;
            color: #155724;
        }
        .changes {
            margin-top: 15px;
            border-top: 1px dashed #ccc;
            padding-top: 10px;
        }
        .current-phase {
            border-left: 4px solid #28a745;
        }
        .collapsed-content {
            display: none;
        }
        .date-info {
            font-size: 0.8em;
            color: #666;
            margin: 4px 0;
        }
        .sprint-selector {
            margin: 10px 0;
            padding: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
        }
        .sprint-selector select {
            padding: 4px;
            border-radius: 3px;
            border: 1px solid #ccc;
        }
        .sprint-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .sprint-meta {
            background-color: #f5f5f5;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        .sprint-dates {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .sprint-date {
            background-color: #e8e8e8;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.8em;
        }
        .section {
            margin-bottom: 20px;
        }
        .subsection {
            margin-bottom: 15px;
        }
        .files-table {
            border-collapse: collapse;
            width: 100%;
        }
        .files-table th, .files-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .files-table th {
            background-color: #f0f0f0;
        }
        .file-changes {
            margin-bottom: 15px;
        }
        .amendments {
            margin-bottom: 10px;
        }
        .implementation-steps {
            list-style: decimal inside;
            padding: 0;
            margin: 0;
        }
        .tracking-info {
            margin-bottom: 10px;
        }
        .implementation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.9rem;
        }
        .implementation-table th {
            background-color: var(--color-primary, #4a5568);
            color: white;
            text-align: left;
            padding: 0.75rem;
            font-weight: 600;
        }
        .implementation-table td {
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            vertical-align: top;
        }
        .implementation-table td:first-child {
            font-weight: 600;
            background-color: #f8fafc;
        }
        .implementation-table ul {
            margin: 0;
            padding-left: 1.25rem;
        }
        .implementation-table li {
            margin-bottom: 0.25rem;
        }
        .implementation-table li:last-child {
            margin-bottom: 0;
        }
        .changes-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.9rem;
        }
        .changes-table th {
            background-color: var(--color-primary, #4a5568);
            color: white;
            text-align: left;
            padding: 0.75rem;
            font-weight: 600;
        }
        .changes-table td {
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            vertical-align: top;
        }
        .changes-table td:first-child {
            font-weight: 600;
            background-color: #f8fafc;
        }
        .changes-table ul {
            margin: 0;
            padding-left: 1.25rem;
        }
        .changes-table li {
            margin-bottom: 0.25rem;
        }
        .changes-table li:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="sprint-header">
        <h1>Swiftie App - Implementation Plan</h1>
        <div class="sprint-selector">
            <label for="sprint-select">Select Sprint: </label>
            <select id="sprint-select">
                <option value="sprint1" selected>Sprint 1: Report Visualizations</option>
            </select>
        </div>
    </div>
    
    <div class="sprint-meta">
        <div class="sprint-dates">
            <span class="sprint-date"><strong>Created:</strong> <span id="creation-date">March 9, 2025</span></span>
            <span class="sprint-date"><strong>Last Edited:</strong> <span id="last-updated">March 9, 2025</span></span>
            <span class="sprint-date"><strong>Started:</strong> <span id="start-date">Not started</span></span>
            <span class="sprint-date"><strong>Completed:</strong> <span id="completion-date">In progress</span></span>
        </div>
        <p>This sprint focuses on enhancing the Swiftie App's reporting features with improved visualizations and display options.</p>
    </div>
    
    <div class="phase current-phase" id="phase1">
        <h2>Phase 1: Basic Display Improvements <span class="phase-status completed">Completed</span></h2>
        <div class="phase-content">
            <div class="section" id="phase1-overview">
                <h3>1. Overview</h3>
                <div class="subsection">
                    <h4>Summary</h4>
                    <p>This phase focuses on simple changes to existing displays, renaming the default display to "List", adjusting the Sunburst visualization, and creating the basic structure for the Grid display.</p>
                </div>
                
                <div class="subsection">
                    <h4>Relevance</h4>
                    <p>These changes will improve the user experience by providing more intuitive naming for display options and laying the groundwork for more advanced visualizations. The Sunburst adjustments will make it more personalized to users with their name in the center.</p>
                </div>
                
                <div class="subsection">
                    <h4>Tasks</h4>
                    <ol>
                        <li>Rename "Default" display to "List" in display options</li>
                        <li>Update Sunburst visualization to show user name + "Top 3x3" in center</li>
                        <li>Remove redundant headings and legends from Sunburst display</li>
                        <li>Create basic 2x2 grid layout structure for the Grid display</li>
                        <li>Populate the top-left grid with top 3 albums</li>
                    </ol>
                </div>
                
                <div class="subsection">
                    <h4>Files Affected</h4>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Action</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>src/routes/albums/share/+page.svelte</code></td>
                                <td>Modify</td>
                                <td>Update display options array and Sunburst visualization</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                                <td>Create</td>
                                <td>New component for 2x2 grid display</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/context/music.svelte</code></td>
                                <td>Modify</td>
                                <td>Add user name property (temporarily hardcoded)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section" id="phase1-changes">
                <h3>2. Changes to Codebase</h3>
                
                <table class="changes-table">
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Planned Changes</th>
                            <th>Potential Issues</th>
                            <th>Implementation Results</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>src/lib/context/music.svelte.ts</code></td>
                            <td>
                                <ul>
                                    <li>Add a userName property with initial value "Taylor Swift Fan"</li>
                                    <li>Make sure the property is available in the context object</li>
                                </ul>
                                <p><strong>Why this file:</strong> The music context is used throughout the app to manage state for selected albums and songs.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure compatibility with Svelte runes mode</li>
                                    <li>Must maintain type safety for TypeScript</li>
                                </ul>
                            </td>
                            <td>
                                <ul>
                                    <li>Added userName property as a $state variable (Line 7)</li>
                                    <li>Exposed userName via a getter in the context object (Line 55)</li>
                                    <li>Added bonus quickShare function to randomly select albums and songs (Lines 48-94)</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/routes/albums/share/+page.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Update the grid header to display "username's Taylor Swift Favorites"</li>
                                    <li>Update the sunburst visualization to use the userName</li>
                                    <li>Style the personalized text appropriately</li>
                                </ul>
                                <p><strong>Why this file:</strong> This is the main page component for sharing selected albums and songs, including all visualization types.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure compatibility with various display modes</li>
                                    <li>Must update D3 visualization code carefully</li>
                                    <li>Need to ensure proper reactivity</li>
                                </ul>
                            </td>
                            <td>
                                <ul>
                                    <li>Updated Default view to show personalized header (Line 247)</li>
                                    <li>Updated Grid view header with username (Line 410)</li>
                                    <li>Updated Sunburst center node to use username (Line 61)</li>
                                    <li>Added "Shared by" attribution to all views (Lines 401-404, 458-461)</li>
                                    <li>Added Quick Share button with animations (Line 239-263)</li>
                                    <li>Fixed reactive update issues for Svelte runes mode (Lines 44, 207-242)</li>
                                    <li>Fixed TypeScript errors in D3 visualization (Lines 113-114, 119-123)</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section" id="phase1-steps">
                <h3>3. Steps to be Taken</h3>
                <ol class="implementation-steps">
                    <li>Update sprint plan to note the start of Phase 1 with current date and time</li>
                    <li>Make changes to <code>src/lib/context/music.svelte</code> to add userName property</li>
                    <li>Create <code>src/lib/components/layout/GridDisplay.svelte</code> for the grid visualization</li>
                    <li>Update <code>src/routes/albums/share/+page.svelte</code> to rename display options and modify Sunburst</li>
                    <li>Update sprint log to document all implemented changes, noting any deviations from the original plan</li>
                    <li>Submit for testing by refreshing the app in the browser to verify changes</li>
                </ol>
            </div>
            
            <div class="section" id="phase1-implementation">
                <h3>4. Implementation Record</h3>
                <p><em>Implementation completed on March 9, 2025.</em></p>
                
                <div class="implementation-summary">
                    <h4>Summary of Changes</h4>
                    <p>Successfully implemented personalized display for all visualization types with a hardcoded userName property.</p>
                    
                    <h4>Deviations from Original Plan</h4>
                    <p>The implementation exceeded the original plan by:</p>
                    <ul>
                        <li>Adding a Quick Share feature that allows users to randomly select albums and songs</li>
                        <li>Adding animation sequence improvements for better visual transitions</li>
                        <li>Fixing TypeScript errors in the D3 visualization that weren't initially identified</li>
                        <li>Adding consistent "Shared by" attribution across all display types</li>
                    </ul>
                    
                    <h4>Testing Results</h4>
                    <p>Manual testing confirmed that:</p>
                    <ul>
                        <li>The username appears correctly in all display types</li>
                        <li>The Quick Share feature successfully selects random albums and songs</li>
                        <li>All animations work as expected with improved timing</li>
                        <li>D3 visualizations render properly and update when selections change</li>
                    </ul>
                </div>
            </div>
            
            <div class="section" id="phase1-tracking">
                <h3>5. Phase Tracking</h3>
                <div class="tracking-info">
                    <p><strong>Started:</strong> <span id="phase1-start-date">March 9, 2025 7:28 AM</span></p>
                    <p><strong>Completed:</strong> <span id="phase1-completion-date">March 9, 2025 7:31 AM</span></p>
                    <p><strong>Status:</strong> <span id="phase1-status">Completed</span></p>
                </div>
                
                <div class="subsection">
                    <h4>Amendment Tracking</h4>
                    <p><em>No amendments were necessary during implementation.</em></p>
                </div>
                
                <div class="subsection">
                    <h4>Client Feedback</h4>
                    <p><em>Awaiting feedback after implementation.</em></p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="phase" id="phase2">
        <h2>Phase 2: Enhanced Visualizations <span class="phase-status not-started">Not Started</span></h2>
        <div class="phase-content">
            <div class="section" id="phase2-overview">
                <h3>1. Overview</h3>
                <div class="subsection">
                    <h4>Summary</h4>
                    <p>This phase enhances existing visualizations with more complex features, completing the Grid display, improving the Sunburst chart, and implementing a basic proportionality toggle.</p>
                </div>
                
                <div class="subsection">
                    <h4>Relevance</h4>
                    <p>These enhancements will significantly improve visual data representation, making it more intuitive for users to understand their listening preferences. The proportionality toggle will give users control over how their data is visualized across different display types.</p>
                </div>
                
                <div class="subsection">
                    <h4>Tasks</h4>
                    <ol>
                        <li>Complete the Grid display with all four grid squares</li>
                        <li>Add album covers and top songs lists to the remaining grid squares</li>
                        <li>Enhance the Sunburst display with proportional section sizes</li>
                        <li>Improve hover interactions and tooltips for the Sunburst</li>
                        <li>Add a global checkbox UI element for proportionality toggle</li>
                        <li>Set up basic state management for the proportionality feature</li>
                    </ol>
                </div>
                
                <div class="subsection">
                    <h4>Files Affected</h4>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Action</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                                <td>Modify</td>
                                <td>Complete implementation with all four squares</td>
                            </tr>
                            <tr>
                                <td><code>src/routes/albums/share/+page.svelte</code></td>
                                <td>Modify</td>
                                <td>Update Sunburst and add proportionality toggle UI</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/visualizations/SunburstChart.svelte</code></td>
                                <td>Create</td>
                                <td>Extract Sunburst visualization into dedicated component</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/context/display.svelte</code></td>
                                <td>Create</td>
                                <td>Create new context for display settings</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section" id="phase2-changes">
                <h3>2. Changes to Codebase</h3>
                
                <table class="changes-table">
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Planned Changes</th>
                            <th>Potential Issues</th>
                            <th>Implementation Results</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Complete the implementation of all four grid squares</li>
                                    <li>Add album covers to the top-right, bottom-left, and bottom-right squares</li>
                                    <li>Add list of top 3 songs from the #1 album to the top-right square</li>
                                    <li>Add list of top 3 songs from the #2 album to the bottom-left square</li>
                                    <li>Add list of top 3 songs from the #3 album to the bottom-right square</li>
                                    <li>Ensure a clean, responsive layout that fits on screen without scrolling</li>
                                </ul>
                                <p><strong>Why this file:</strong> This component handles the Grid display layout and needs to be completed with all four squares as specified in the requirements.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure responsive behavior works across different screen sizes</li>
                                    <li>Must handle cases where albums or songs data might be incomplete</li>
                                    <li>Need to ensure the grid cells maintain proper proportions in different viewport sizes</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/routes/albums/share/+page.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Update the Sunburst visualization to make section sizes proportional to rank</li>
                                    <li>Add UI controls for the proportionality toggle (checkbox)</li>
                                    <li>Integrate the GridDisplay component with all required data</li>
                                    <li>Connect grid display to the proportionality toggle state</li>
                                </ul>
                                <p><strong>Why this file:</strong> This is the main file for the share page and needs to be updated to support the new visualization features and controls.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Must ensure changes are compatible with Svelte runes mode</li>
                                    <li>Need to preserve existing functionality while adding new features</li>
                                    <li>Must ensure the proportionality toggle affects visualizations as expected</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/visualizations/SunburstChart.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create new component to extract Sunburst visualization logic from +page.svelte</li>
                                    <li>Implement proportional section sizes based on rank</li>
                                    <li>Improve hover interactions and tooltips</li>
                                    <li>Ensure the center shows the user name + "Top 3x3"</li>
                                    <li>Remove redundant legends and labels</li>
                                </ul>
                                <p><strong>Why this file:</strong> Extracting the Sunburst visualization into a dedicated component follows best practices for code organization and makes it easier to maintain and enhance.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure the component is created using Svelte runes mode for compatibility</li>
                                    <li>D3.js integration with Svelte requires careful handling of lifecycle methods</li>
                                    <li>Must ensure text scaling works properly with different lengths of user names</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/context/display.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create a new context file for managing display settings</li>
                                    <li>Implement state management for the proportionality toggle</li>
                                    <li>Ensure the context can be imported and used by different components</li>
                                </ul>
                                <p><strong>Why this file:</strong> Creating a dedicated context for display settings allows for centralized state management that can be shared across different components.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure the context is created using the same Svelte mode as other components</li>
                                    <li>Must handle state updates properly to trigger re-renders when needed</li>
                                    <li>Need to ensure the context provides a clean API for components to interact with</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section" id="phase2-steps">
                <h3>3. Steps to be Taken</h3>
                <ol class="implementation-steps">
                    <li>Update sprint plan to note the start of Phase 2 with current date and time</li>
                    <li>Create <code>src/lib/context/display.svelte</code> for display settings management</li>
                    <li>Create <code>src/lib/components/visualizations/SunburstChart.svelte</code> as a dedicated component</li>
                    <li>Update <code>src/lib/components/layout/GridDisplay.svelte</code> to complete all four grid squares</li>
                    <li>Modify <code>src/routes/albums/share/+page.svelte</code> to integrate all updated components</li>
                    <li>Update sprint log to document all implemented changes, noting any deviations from original plan</li>
                    <li>Submit for testing by refreshing the app in the browser to verify changes</li>
                </ol>
            </div>
            
            <div class="section" id="phase2-implementation">
                <h3>4. Implementation Record</h3>
                <p><em>This section will be filled after implementation is complete.</em></p>
            </div>
            
            <div class="section" id="phase2-tracking">
                <h3>5. Phase Tracking</h3>
                <div class="tracking-info">
                    <p><strong>Started:</strong> <span id="phase2-start-date">Not started</span></p>
                    <p><strong>Completed:</strong> <span id="phase2-completion-date">Not started</span></p>
                    <p><strong>Status:</strong> <span id="phase2-status">Not started</span></p>
                </div>
                
                <div class="subsection">
                    <h4>Amendment Tracking</h4>
                    <p><em>No amendments made yet.</em></p>
                </div>
                
                <div class="subsection">
                    <h4>Client Feedback</h4>
                    <p><em>Awaiting feedback after implementation.</em></p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="phase" id="phase3">
        <h2>Phase 3: Proportionality Feature <span class="phase-status not-started">Not Started</span></h2>
        <div class="phase-content">
            <div class="section" id="phase3-overview">
                <h3>1. Overview</h3>
                <div class="subsection">
                    <h4>Summary</h4>
                    <p>This phase focuses on fully implementing the proportionality feature across all displays, ensuring that visualizations accurately represent data rankings.</p>
                </div>
                
                <div class="subsection">
                    <h4>Relevance</h4>
                    <p>The proportionality toggle provides users with greater control over their visualization experience. By connecting this toggle to all display types, users can seamlessly switch between equal-sized elements and proportionally-sized elements based on their preference.</p>
                </div>
                
                <div class="subsection">
                    <h4>Tasks</h4>
                    <ol>
                        <li>Update List display to support proportional sizing of albums and songs</li>
                        <li>Enhance Grid display to implement proportional sizing in all four squares</li>
                        <li>Connect the proportionality toggle to affect all display types</li>
                        <li>Implement smooth transitions when toggling proportionality</li>
                        <li>Add visual indicators to show which elements are affected by proportionality</li>
                    </ol>
                </div>
                
                <div class="subsection">
                    <h4>Files Affected</h4>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Action</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>src/routes/albums/share/+page.svelte</code></td>
                                <td>Modify</td>
                                <td>Update List display for proportional sizing</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                                <td>Modify</td>
                                <td>Implement proportional sizing in grid display</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/visualizations/SunburstChart.svelte</code></td>
                                <td>Modify</td>
                                <td>Ensure Sunburst works with proportionality toggle</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/context/display.svelte</code></td>
                                <td>Modify</td>
                                <td>Enhance display context for full proportionality support</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section" id="phase3-changes">
                <h3>2. Changes to Codebase</h3>
                
                <table class="changes-table">
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Planned Changes</th>
                            <th>Potential Issues</th>
                            <th>Implementation Results</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>src/routes/albums/share/+page.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Update the List display to support proportional sizing of albums and songs</li>
                                    <li>Add CSS classes and styles for proportional elements</li>
                                    <li>Connect the List display to the proportionality toggle state</li>
                                    <li>Implement smooth transitions when toggling proportionality</li>
                                </ul>
                                <p><strong>Why this file:</strong> This file contains the List display implementation which needs to be updated to support proportional sizing of elements.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Must ensure the proportionality toggle works consistently across all displays</li>
                                    <li>Need to handle responsive behavior with proportionally sized elements</li>
                                    <li>Must implement smooth transitions without causing layout shifts</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Update the Grid display to support proportional sizing in all four squares</li>
                                    <li>Implement dynamic sizing of album covers based on album rank</li>
                                    <li>Adjust font sizes and spacing for songs based on song rank</li>
                                    <li>Connect the Grid display to the proportionality toggle state</li>
                                </ul>
                                <p><strong>Why this file:</strong> The GridDisplay component needs to support multiple variations to give users more customization options.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to maintain grid layout integrity while implementing proportional sizing</li>
                                    <li>Must ensure responsive behavior with proportionally sized elements</li>
                                    <li>Need to handle cases where proportionality might make some elements too small</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/visualizations/SunburstChart.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Ensure the Sunburst visualization properly responds to the proportionality toggle</li>
                                    <li>Refine the proportional sizing algorithm for segments</li>
                                    <li>Implement smooth transitions when toggling proportionality</li>
                                </ul>
                                <p><strong>Why this file:</strong> While the basic proportionality was added in Phase 2, this update ensures the Sunburst chart fully integrates with the global toggle system.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>D3 animations and transitions require careful management with Svelte lifecycle</li>
                                    <li>Must ensure text remains readable when segment sizes change</li>
                                    <li>Need to handle cases where proportional segments might become too small</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/context/display.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Enhance the display context to support full proportionality across all displays</li>
                                    <li>Add methods for calculating proportional sizes based on rank</li>
                                    <li>Implement persistence for the proportionality setting</li>
                                </ul>
                                <p><strong>Why this file:</strong> The display context needs to be enhanced to provide consistent proportionality calculations and state management across all display types.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure methods are compatible with Svelte runes mode</li>
                                    <li>Must handle state updates correctly to trigger re-renders when needed</li>
                                    <li>Need to provide a clean API that works consistently for all display types</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section" id="phase3-steps">
                <h3>3. Steps to be Taken</h3>
                <ol class="implementation-steps">
                    <li>Update sprint plan to note the start of Phase 3 with current date and time</li>
                    <li>Enhance <code>src/lib/context/display.svelte</code> with methods for proportional calculations</li>
                    <li>Update <code>src/lib/components/visualizations/SunburstChart.svelte</code> to fully support the toggle</li>
                    <li>Modify <code>src/lib/components/layout/GridDisplay.svelte</code> to implement proportional sizing</li>
                    <li>Update <code>src/routes/albums/share/+page.svelte</code> to support proportional sizing in List display</li>
                    <li>Update sprint log to document all implemented changes, noting any deviations from original plan</li>
                    <li>Submit for testing by refreshing the app in the browser to verify changes</li>
                </ol>
            </div>
            
            <div class="section" id="phase3-implementation">
                <h3>4. Implementation Record</h3>
                <p><em>This section will be filled after implementation is complete.</em></p>
            </div>
            
            <div class="section" id="phase3-tracking">
                <h3>5. Phase Tracking</h3>
                <div class="tracking-info">
                    <p><strong>Started:</strong> <span id="phase3-start-date">Not started</span></p>
                    <p><strong>Completed:</strong> <span id="phase3-completion-date">Not started</span></p>
                    <p><strong>Status:</strong> <span id="phase3-status">Not started</span></p>
                </div>
                
                <div class="subsection">
                    <h4>Amendment Tracking</h4>
                    <p><em>No amendments made yet.</em></p>
                </div>
                
                <div class="subsection">
                    <h4>Client Feedback</h4>
                    <p><em>Awaiting feedback after implementation.</em></p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="phase" id="phase4">
        <h2>Phase 4: New Visualizations <span class="phase-status not-started">Not Started</span></h2>
        <div class="phase-content">
            <div class="section" id="phase4-overview">
                <h3>1. Overview</h3>
                <div class="subsection">
                    <h4>Summary</h4>
                    <p>This phase introduces entirely new visualizations starting with the Sankey diagram to show relationships between albums and songs, as well as implementing the foundations for display variations.</p>
                </div>
                
                <div class="subsection">
                    <h4>Relevance</h4>
                    <p>Adding new visualization types gives users more options to explore and share their music preferences. The Sankey diagram is particularly valuable for showing the relationships between albums and songs. Display variations will allow for customized viewing experiences.</p>
                </div>
                
                <div class="subsection">
                    <h4>Tasks</h4>
                    <ol>
                        <li>Implement Sankey diagram visualization showing flows between albums and songs</li>
                        <li>Create variation selector UI component</li>
                        <li>Set up state management for display variations</li>
                        <li>Implement one variation for each existing display type</li>
                        <li>Add help tooltips for complex visualizations</li>
                    </ol>
                </div>
                
                <div class="subsection">
                    <h4>Files Affected</h4>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Action</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>src/lib/components/visualizations/SankeyDiagram.svelte</code></td>
                                <td>Create</td>
                                <td>New component for Sankey visualization</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/controls/VariationSelector.svelte</code></td>
                                <td>Create</td>
                                <td>New component for selecting display variations</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/context/display.svelte</code></td>
                                <td>Modify</td>
                                <td>Update to include variation state management</td>
                            </tr>
                            <tr>
                                <td><code>src/routes/albums/share/+page.svelte</code></td>
                                <td>Modify</td>
                                <td>Integrate Sankey display and variation selector</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section" id="phase4-changes">
                <h3>2. Changes to Codebase</h3>
                
                <table class="changes-table">
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Planned Changes</th>
                            <th>Potential Issues</th>
                            <th>Implementation Results</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>src/lib/components/visualizations/SankeyDiagram.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create a new Svelte component for the Sankey diagram visualization</li>
                                    <li>Implement D3.js-based Sankey calculations to show flows between albums and songs</li>
                                    <li>Add hover interactions and tooltips to display detailed information</li>
                                    <li>Support proportionality toggle for link widths between nodes</li>
                                </ul>
                                <p><strong>Why this file:</strong> A dedicated component for the Sankey visualization follows the established pattern for visualization components and keeps the codebase well-organized.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>D3.js Sankey diagrams can be complex to implement and integrate with Svelte</li>
                                    <li>Need to ensure the component is created using Svelte runes mode for compatibility</li>
                                    <li>Must handle cases where there are many songs, which could make the diagram cluttered</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/controls/VariationSelector.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create a new component for selecting between display variations</li>
                                    <li>Implement a clean and intuitive UI for selecting variations</li>
                                    <li>Connect the component to the display context for state management</li>
                                    <li>Add appropriate styles and animations for a modern user experience</li>
                                </ul>
                                <p><strong>Why this file:</strong> Creating a dedicated component for variation selection keeps the UI code modular and reusable across different parts of the application.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure the component is created using Svelte runes mode for compatibility</li>
                                    <li>Must design a UI that remains usable when many variations are available</li>
                                    <li>Need to handle the initial state when no variations are selected</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/context/display.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Update the display context to include variation state management</li>
                                    <li>Add methods for setting and retrieving current variations for each display type</li>
                                    <li>Implement persistence for display variation preferences</li>
                                </ul>
                                <p><strong>Why this file:</strong> The display context is the appropriate place to manage display variation state that needs to be shared across components.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Must ensure compatibility with Svelte runes mode</li>
                                    <li>Need to handle interactions between proportionality settings and variations</li>
                                    <li>Must ensure state updates correctly trigger re-renders across components</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/routes/albums/share/+page.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Update displayOptions array to include Sankey diagram as a new display option</li>
                                    <li>Add conditional rendering for the SankeyDiagram component</li>
                                    <li>Integrate the VariationSelector component in the UI</li>
                                    <li>Update display logic to handle variations for each display type</li>
                                </ul>
                                <p><strong>Why this file:</strong> This is the main page component that controls which display is shown based on user selection and needs to be updated to support the new Sankey diagram and variations system.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Must ensure changes are compatible with Svelte runes mode</li>
                                    <li>Need to maintain a clean UI even with additional display options and controls</li>
                                    <li>Must ensure all components receive the necessary data</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section" id="phase4-steps">
                <h3>3. Steps to be Taken</h3>
                <ol class="implementation-steps">
                    <li>Update sprint plan to note the start of Phase 4 with current date and time</li>
                    <li>Update <code>src/lib/context/display.svelte</code> to include variation state management</li>
                    <li>Create <code>src/lib/components/controls/VariationSelector.svelte</code> component</li>
                    <li>Create <code>src/lib/components/visualizations/SankeyDiagram.svelte</code> component</li>
                    <li>Update <code>src/routes/albums/share/+page.svelte</code> to integrate new components</li>
                    <li>Update sprint log to document all implemented changes, noting any deviations from original plan</li>
                    <li>Submit for testing by refreshing the app in the browser to verify changes</li>
                </ol>
            </div>
            
            <div class="section" id="phase4-implementation">
                <h3>4. Implementation Record</h3>
                <p><em>This section will be filled after implementation is complete.</em></p>
            </div>
            
            <div class="section" id="phase4-tracking">
                <h3>5. Phase Tracking</h3>
                <div class="tracking-info">
                    <p><strong>Started:</strong> <span id="phase4-start-date">Not started</span></p>
                    <p><strong>Completed:</strong> <span id="phase4-completion-date">Not started</span></p>
                    <p><strong>Status:</strong> <span id="phase4-status">Not started</span></p>
                </div>
                
                <div class="subsection">
                    <h4>Amendment Tracking</h4>
                    <p><em>No amendments made yet.</em></p>
                </div>
                
                <div class="subsection">
                    <h4>Client Feedback</h4>
                    <p><em>Awaiting implementation.</em></p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="phase" id="phase5">
        <h2>Phase 5: Advanced Features and Polish <span class="phase-status not-started">Not Started</span></h2>
        <div class="phase-content">
            <div class="section" id="phase5-overview">
                <h3>1. Overview</h3>
                <div class="subsection">
                    <h4>Summary</h4>
                    <p>This final phase implements advanced features like display variations and the "Add Your Own" suggestion system, followed by comprehensive polishing across all components.</p>
                </div>
                
                <div class="subsection">
                    <h4>Relevance</h4>
                    <p>The advanced features will give users more control and customization options, while the polish ensures a consistent, high-quality user experience across all display types and variations. The "Add Your Own" feature will enable user feedback and suggestions for future enhancements.</p>
                </div>
                
                <div class="subsection">
                    <h4>Tasks</h4>
                    <ol>
                        <li>Implement complete variations for all display types</li>
                        <li>Create the "Add Your Own" feature with submission form</li>
                        <li>Implement suggestion management system</li>
                        <li>Apply consistent styling across all components</li>
                        <li>Optimize performance and add smooth transitions</li>
                        <li>Conduct thorough testing across all features</li>
                    </ol>
                </div>
                
                <div class="subsection">
                    <h4>Files Affected</h4>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>Action</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>src/routes/albums/share/+page.svelte</code></td>
                                <td>Modify</td>
                                <td>Implement List display variations and integrate suggestion system</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                                <td>Modify</td>
                                <td>Implement Grid display variations</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/forms/SuggestionForm.svelte</code></td>
                                <td>Create</td>
                                <td>New component for suggestion submission form</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/display/SuggestionList.svelte</code></td>
                                <td>Create</td>
                                <td>New component for displaying submitted suggestions</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/context/suggestions.svelte</code></td>
                                <td>Create</td>
                                <td>New context for managing suggestion state</td>
                            </tr>
                            <tr>
                                <td><code>src/lib/components/visualizations/SunburstChart.svelte</code></td>
                                <td>Modify</td>
                                <td>Implement Sunburst display variations</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section" id="phase5-changes">
                <h3>2. Changes to Codebase</h3>
                
                <table class="changes-table">
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Planned Changes</th>
                            <th>Potential Issues</th>
                            <th>Implementation Results</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>src/routes/albums/share/+page.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Implement multiple variations for the List display</li>
                                    <li>Integrate the suggestion form and list components</li>
                                    <li>Improve transitions between display types and variations</li>
                                    <li>Apply consistent styling and polish UI elements</li>
                                </ul>
                                <p><strong>Why this file:</strong> As the main page component, this file needs updates to support all the advanced features and ensure a polished user experience.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Must ensure all components work together harmoniously</li>
                                    <li>Need to maintain performance with all the additional features</li>
                                    <li>Must ensure compatibility with Svelte runes mode</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/layout/GridDisplay.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Implement multiple variations for the Grid display</li>
                                    <li>Add options for different grid layouts (e.g., 3x3, 4x2)</li>
                                    <li>Apply consistent styling and transitions</li>
                                    <li>Optimize performance for different data sizes</li>
                                </ul>
                                <p><strong>Why this file:</strong> The GridDisplay component needs to support multiple variations to give users more customization options.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Different grid layouts may require substantial CSS changes</li>
                                    <li>Must ensure responsive behavior across different screen sizes</li>
                                    <li>Need to handle cases where data might not fit well in certain layouts</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/forms/SuggestionForm.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create a new component for submitting display suggestions</li>
                                    <li>Implement form validation and user feedback</li>
                                    <li>Connect to the suggestions context for state management</li>
                                    <li>Add appropriate styling consistent with the app design</li>
                                </ul>
                                <p><strong>Why this file:</strong> A dedicated component for the suggestion form follows best practices for modular code organization and separation of concerns.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure the component is created using Svelte runes mode</li>
                                    <li>Must implement proper form validation to prevent invalid submissions</li>
                                    <li>Should handle form submission gracefully without page reloads</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/display/SuggestionList.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create a new component for displaying submitted suggestions</li>
                                    <li>Implement filtering and sorting options</li>
                                    <li>Add voting or rating functionality for suggestions</li>
                                    <li>Apply consistent styling with the rest of the app</li>
                                </ul>
                                <p><strong>Why this file:</strong> A dedicated component for displaying suggestions allows for better organization of code and separation of concerns.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure the component is created using Svelte runes mode</li>
                                    <li>Must handle cases where there are many suggestions</li>
                                    <li>Need to implement efficient rendering for potentially large lists</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/context/suggestions.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Create a new context for managing suggestion state</li>
                                    <li>Implement methods for adding, filtering, and sorting suggestions</li>
                                    <li>Add persistence for submitted suggestions</li>
                                    <li>Handle voting or rating functionality</li>
                                </ul>
                                <p><strong>Why this file:</strong> A dedicated context for suggestions provides centralized state management that can be accessed by different components.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>Need to ensure compatibility with Svelte runes mode</li>
                                    <li>Must handle potential race conditions with multiple users</li>
                                    <li>Need to implement efficient data structures for suggestions</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                        <tr>
                            <td><code>src/lib/components/visualizations/SunburstChart.svelte</code></td>
                            <td>
                                <ul>
                                    <li>Implement multiple variations for the Sunburst visualization</li>
                                    <li>Add options for different color schemes and layouts</li>
                                    <li>Implement advanced hover and interaction features</li>
                                    <li>Optimize performance and animations</li>
                                </ul>
                                <p><strong>Why this file:</strong> The SunburstChart component needs to support multiple variations to give users more customization options.</p>
                            </td>
                            <td>
                                <ul>
                                    <li>D3.js implementations can become complex with multiple variations</li>
                                    <li>Must ensure compatibility with Svelte runes mode</li>
                                    <li>Need to handle potential performance issues with complex animations</li>
                                </ul>
                            </td>
                            <td>
                                <p><em>Not implemented yet</em></p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section" id="phase5-steps">
                <h3>3. Steps to be Taken</h3>
                <ol class="implementation-steps">
                    <li>Update sprint plan to note the start of Phase 5 with current date and time</li>
                    <li>Create <code>src/lib/context/suggestions.svelte</code> for suggestion state management</li>
                    <li>Create <code>src/lib/components/forms/SuggestionForm.svelte</code> component</li>
                    <li>Create <code>src/lib/components/display/SuggestionList.svelte</code> component</li>
                    <li>Update all display components to implement multiple variations</li>
                    <li>Update <code>src/routes/albums/share/+page.svelte</code> to integrate all components</li>
                    <li>Apply consistent styling and optimize performance across all components</li>
                    <li>Update sprint log to document all implemented changes, noting any deviations from original plan</li>
                    <li>Submit for final testing by refreshing the app in the browser to verify all changes</li>
                </ol>
            </div>
            
            <div class="section" id="phase5-implementation">
                <h3>4. Implementation Record</h3>
                <p><em>This section will be filled after implementation is complete.</em></p>
            </div>
            
            <div class="section" id="phase5-tracking">
                <h3>5. Phase Tracking</h3>
                <div class="tracking-info">
                    <p><strong>Started:</strong> <span id="phase5-start-date">Not started</span></p>
                    <p><strong>Completed:</strong> <span id="phase5-completion-date">Not started</span></p>
                    <p><strong>Status:</strong> <span id="phase5-status">Not started</span></p>
                </div>
                
                <div class="subsection">
                    <h4>Amendment Tracking</h4>
                    <p><em>No amendments made yet.</em></p>
                </div>
                
                <div class="subsection">
                    <h4>Client Feedback</h4>
                    <p><em>Awaiting implementation.</em></p>
                </div>
            </div>
        </div>
    </div>
    
    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center; font-size: 0.8em; color: #777;">
        <p>Last Updated: <span id="last-updated">March 9, 2025</span></p>
    </footer>

    <script>
        // Update "Last Updated" time
        document.getElementById('last-updated').textContent = new Date().toLocaleString();
        
        // Collapsible functionality for phases and tasks
        document.addEventListener('DOMContentLoaded', function() {
            // Initially collapse all phases except the current one
            const phases = document.querySelectorAll('.phase');
            phases.forEach(phase => {
                const phaseHeader = phase.querySelector('h2');
                const phaseContent = phase.querySelector('.phase-content');
                
                // If not current phase, collapse it
                if (!phase.classList.contains('current-phase')) {
                    phaseContent.classList.add('collapsed-content');
                    phaseHeader.classList.add('collapsed');
                }
                
                // Add click event to phase headers
                phaseHeader.addEventListener('click', function() {
                    // Toggle current phase
                    phaseContent.classList.toggle('collapsed-content');
                    phaseHeader.classList.toggle('collapsed');
                    
                    // Collapse all other phases
                    phases.forEach(otherPhase => {
                        if (otherPhase !== phase) {
                            const otherHeader = otherPhase.querySelector('h2');
                            const otherContent = otherPhase.querySelector('.phase-content');
                            otherContent.classList.add('collapsed-content');
                            otherHeader.classList.add('collapsed');
                        }
                    });
                });
            });
            
            // Make tasks collapsible
            const tasks = document.querySelectorAll('.task');
            tasks.forEach(task => {
                const taskHeader = task.querySelector('h4');
                const taskContent = task.querySelector('.task-content');
                
                // Initially collapse all tasks
                taskContent.classList.add('collapsed-content');
                taskHeader.classList.add('collapsed');
                
                // Add click event to task headers
                taskHeader.addEventListener('click', function(event) {
                    event.stopPropagation(); // Prevent triggering phase click
                    
                    // Toggle current task
                    taskContent.classList.toggle('collapsed-content');
                    taskHeader.classList.toggle('collapsed');
                    
                    // Collapse all other tasks in the same phase
                    const parentPhase = task.closest('.phase');
                    const siblingTasks = parentPhase.querySelectorAll('.task');
                    siblingTasks.forEach(otherTask => {
                        if (otherTask !== task) {
                            const otherHeader = otherTask.querySelector('h4');
                            const otherContent = otherTask.querySelector('.task-content');
                            otherContent.classList.add('collapsed-content');
                            otherHeader.classList.add('collapsed');
                        }
                    });
                });
            });
        });

        // Date management functions
        const formatDate = (date) => {
            return new Date(date).toLocaleString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        };

        // Set current date as creation date if not already set
        const creationDateEl = document.getElementById('creation-date');
        if (creationDateEl.textContent === 'March 9, 2025') {
            creationDateEl.textContent = formatDate(new Date());
        }

        // Update last edited date
        

        // Start Phase 1
        

        // Complete Phase 1
        recordPhaseComplete('phase1');

        // Functions to manage phase tracking
        function recordPhaseStart(phaseId) {
            const phaseEl = document.getElementById(phaseId);
            const startDateEl = document.getElementById('start-date');
            if (startDateEl.textContent === 'Not started') {
                startDateEl.textContent = formatDate(new Date());
            }
            
            // Mark phase as in progress
            const phaseStatusEl = phaseEl.querySelector('.phase-status');
            phaseStatusEl.textContent = 'In Progress';
            phaseStatusEl.className = 'phase-status in-progress';
            
            // Update phase tracking
            const trackingEl = phaseEl.querySelector('.changes p:first-of-type');
            trackingEl.innerHTML = `<em>Phase started on ${formatDate(new Date())}.</em>`;
        }
        
        function recordPhaseCompletion(phaseId) {
            const phaseEl = document.getElementById(phaseId);
            const completionDateEl = document.getElementById('completion-date');
            completionDateEl.textContent = formatDate(new Date());
            
            // Mark phase as completed
            const phaseStatusEl = phaseEl.querySelector('.phase-status');
            phaseStatusEl.textContent = 'Completed';
            phaseStatusEl.className = 'phase-status completed';
            
            // Update phase tracking
            const trackingEl = phaseEl.querySelector('.changes h3:first-of-type + p');
            trackingEl.innerHTML = `<em>Phase completed on ${formatDate(new Date())}.</em>`;
        }
        
        function recordAmendment(phaseId, amendmentText) {
            const phaseEl = document.getElementById(phaseId);
            const amendmentEl = phaseEl.querySelector('.changes h3:nth-of-type(2) + p');
            
            // Check if this is the first amendment
            if (amendmentEl.textContent.includes('No amendments made yet')) {
                amendmentEl.innerHTML = `<ol><li><strong>${formatDate(new Date())}:</strong> ${amendmentText}</li></ol>`;
            } else {
                // Extract the ordered list
                const amendmentList = amendmentEl.querySelector('ol');
                // Add a new item
                const newItem = document.createElement('li');
                newItem.innerHTML = `<strong>${formatDate(new Date())}:</strong> ${amendmentText}`;
                amendmentList.appendChild(newItem);
            }
        }
        
        // Add event listeners for sprint selector
        document.getElementById('sprint-select').addEventListener('change', function(e) {
            // This would be used to load different sprint data in a real application
            console.log('Selected sprint:', e.target.value);
        });
    </script>
</body>
</html>
